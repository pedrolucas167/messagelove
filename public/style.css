

/* Importa√ß√£o da fonte base */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
/* As fontes da p√°gina do cart√£o s√£o importadas via <link> no card.html */

/* ============================================
   üé® VARI√ÅVEIS GLOBAIS (DESIGN TOKENS)
   ============================================ */
:root {
  /* Cores */
  --color-primary: hsl(330, 70%, 60%);
  --color-primary-dark: hsl(313, 60%, 45%);
  --color-secondary: hsl(255, 80%, 75%);
  --color-bg: hsl(210, 20%, 98%);
  --color-bg-dark: hsl(240, 5%, 10%); 
  --color-surface: hsl(0, 0%, 100%);
  --color-text: hsl(240, 5%, 20%);
  --color-muted: hsl(240, 3%, 45%);
  --color-light: hsl(240, 10%, 93%);
  --color-border: hsl(240, 5%, 85%);
  --color-error: hsl(0, 70%, 55%);
  --color-success: hsl(120, 60%, 45%);
  --color-warning: hsl(40, 80%, 55%); /* Nova cor para notifica√ß√µes de rate limiting */

  /* Fontes */
  --font-heading: 'Playfair Display', serif;
  --font-body: 'Inter', sans-serif;
  --font-handwriting: 'Caveat', cursive;
  
  /* Espa√ßamento */
  --space-xs: 0.5rem;
  --space-sm: 1rem;
  --space-md: 1.5rem;
  --space-lg: 2rem;
  --space-xl: 3rem;

  /* Transi√ß√µes */
  --transition-base: 250ms cubic-bezier(0.25, 0.8, 0.25, 1);
  --transition-long: 800ms cubic-bezier(0.4, 0, 0.2, 1);

  /* Bordas e Sombras */
  --radius-md: 0.75rem;
  --radius-lg: 1rem;
  --radius-pill: 9999px;
  --shadow-sm: 0 2px 5px hsla(240, 5%, 20%, 0.1);
  --shadow-md: 0 5px 15px hsla(240, 5%, 20%, 0.12);
  --shadow-lg: 0 10px 30px hsla(240, 5%, 20%, 0.15);
  --shadow-focus: 0 0 0 4px hsla(330, 70%, 60%, 0.25);
}

/* ============================================
   üèóÔ∏è RESET E ESTILOS BASE
   ============================================ */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html { font-size: 16px; scroll-behavior: smooth; }
body { 
  font-family: var(--font-body); 
  line-height: 1.6; 
  color: var(--color-text); 
  background-color: var(--color-bg); 
  -webkit-font-smoothing: antialiased; 
  min-height: 100vh; 
  transition: background-color var(--transition-long); 
}
body.card-is-open { background-color: var(--color-bg-dark); }
img, picture { display: block; max-width: 100%; height: auto; }
button { 
  cursor: pointer; 
  background: none; 
  border: none; 
  font: inherit; 
  color: inherit; 
}
a { color: var(--color-primary); text-decoration: none; transition: color var(--transition-base); }
a:hover { color: var(--color-primary-dark); }

/* ============================================
   üèõÔ∏è ESTRUTURA E LAYOUT GERAL
   ============================================ */
.container { 
  width: 100%; 
  max-width: 960px; 
  margin-inline: auto; 
  padding-inline: var(--space-md); 
}
#particle-canvas { 
  position: fixed; 
  top: 0; 
  left: 0; 
  width: 100%; 
  height: 100%; 
  z-index: -1; 
  pointer-events: none; 
}

/* ============================================
   üß± COMPONENTES (P√°gina de Cria√ß√£o - index.html)
   ============================================ */
.main-header { 
  background: linear-gradient(135deg, var(--color-primary), var(--color-primary-dark)); 
  color: var(--color-surface); 
  padding: var(--space-md) var(--space-md); /* Ajustado para suportar logout */
  margin-bottom: var(--space-xl); 
  text-align: center; 
  box-shadow: var(--shadow-md); 
  position: relative; 
}
.header-nav { 
  display: flex; 
  justify-content: space-between; 
  align-items: center; 
  max-width: 960px; 
  margin-inline: auto; 
  padding-inline: var(--space-md); 
}
.header-logo { 
  font-size: 1.5rem; 
  font-weight: 700; 
  color: var(--color-surface); 
}
#logoutBtn { 
  margin-left: auto; 
  padding: 0.5em 1em; /* Tamanho menor para caber no header */
} /* Estilizado como .btn--tertiary */
.main-content { padding-bottom: var(--space-xl); }
.main-footer { 
  background-color: var(--color-surface); 
  color: var(--color-muted); 
  padding: var(--space-lg) 0; 
  border-top: 1px solid var(--color-border); 
  text-align: center; 
  font-size: 0.9rem; 
}
h1, h2, h3 { 
  line-height: 1.2; 
  font-weight: 700; 
  letter-spacing: -0.02em; 
}
h1 { font-size: clamp(2.2rem, 6vw, 3rem); margin-bottom: var(--space-sm); }
h2 { font-size: clamp(1.8rem, 4.5vw, 2.2rem); margin-bottom: var(--space-md); }
.subtitle { 
  font-size: clamp(1rem, 3.5vw, 1.25rem); 
  opacity: 0.9; 
  max-width: 65ch; 
  margin-inline: auto; 
}
.section-title { 
  font-weight: 600; 
  color: var(--color-primary-dark); 
  margin-bottom: var(--space-lg); 
  padding-bottom: var(--space-xs); 
  border-bottom: 3px solid var(--color-secondary); 
  display: inline-block; 
}

/* --- Bot√µes (Sistema Padronizado para todo o site) --- */
.btn { 
  display: inline-flex; 
  align-items: center; 
  justify-content: center; 
  gap: var(--space-xs); 
  padding: 0.8em 1.5em; 
  border-radius: var(--radius-pill); 
  font-weight: 600; 
  border: 2px solid transparent; 
  text-decoration: none; 
  transition: all var(--transition-base); 
}
.btn:hover:not(:disabled) { 
  transform: translateY(-3px); 
  box-shadow: var(--shadow-md); 
  text-decoration: none; 
}
.btn:active:not(:disabled) { 
  transform: translateY(0); 
  box-shadow: var(--shadow-sm); 
}
.btn:focus-visible { 
  outline: none; 
  box-shadow: var(--shadow-focus); 
}
.btn:disabled { 
  opacity: 0.6; 
  cursor: not-allowed; 
}
.btn--primary { 
  background-color: var(--color-primary); 
  color: var(--color-surface); 
}
.btn--primary:hover:not(:disabled) { 
  background-color: var(--color-primary-dark); 
}
.btn--secondary { 
  background-color: transparent; 
  border-color: var(--color-primary); 
  color: var(--color-primary); 
}
.btn--secondary:hover:not(:disabled) { 
  background-color: var(--color-primary); 
  color: var(--color-surface); 
}
.btn--tertiary { 
  background-color: var(--color-light); 
  color: var(--color-muted); 
  border-color: var(--color-border); 
}
.btn--tertiary:hover:not(:disabled) { 
  background-color: var(--color-border); 
  color: var(--color-text); 
}

/* --- Formul√°rios --- */
.card-form { 
  background-color: var(--color-surface); 
  border-radius: var(--radius-lg); 
  padding: clamp(var(--space-md), 5vw, var(--space-xl)); 
  box-shadow: var(--shadow-md); 
}
.form-section { border: none; padding: 0; }
.form-group { margin-bottom: var(--space-md); } /* Ajustado para espa√ßamento mais compacto */
label { 
  display: block; 
  margin-bottom: var(--space-xs); 
  font-weight: 600; 
}
.required-field::after { 
  content: ' *'; 
  color: var(--color-error); 
}
.form-input, textarea { 
  width: 100%; 
  padding: var(--space-sm); 
  border: 1px solid var(--color-border); 
  border-radius: var(--radius-md); 
  background-color: var(--color-surface); 
  transition: border-color var(--transition-base), box-shadow var(--transition-base); 
}
.form-input:focus, textarea:focus { 
  outline: none; 
  border-color: var(--color-primary); 
  box-shadow: var(--shadow-focus); 
}
textarea { min-height: 140px; resize: vertical; }
#youtubeStartTimeInput { 
  width: 100px; /* Tamanho compacto */
  text-align: center; 
} /* Novo input */
.field-hint { 
  display: block; 
  margin-top: var(--space-xs); 
  font-size: 0.85rem; 
  color: var(--color-muted); 
}
.youtube-error { 
  color: var(--color-error); 
  font-size: 0.9rem; 
  margin-top: var(--space-sm); 
}
.input-group-action { 
  display: flex; 
  gap: var(--space-sm); 
  align-items: flex-end; 
}
.input-group-action .form-input { flex-grow: 1; }
.youtube-input-group { 
  display: grid; 
  grid-template-columns: 1fr auto; /* URL e bot√£o */
  gap: var(--space-sm); 
}
.youtube-input-group .form-input { width: 100%; }
.youtube-time-group { 
  display: flex; 
  gap: var(--space-sm); 
  margin-top: var(--space-sm); 
}
.file-upload input[type="file"] { 
  padding: var(--space-lg) var(--space-sm); 
  border: 2px dashed var(--color-border); 
  border-radius: var(--radius-md); 
  text-align: center; 
  cursor: pointer; 
  transition: all var(--transition-base); 
}
.file-upload input[type="file"]:hover, 
.file-upload input[type="file"]:focus-visible { 
  border-color: var(--color-primary); 
  background-color: hsla(330, 70%, 60%, 0.05); 
}
.preview-container { 
  position: relative; 
  margin-top: var(--space-md); 
}
.preview { 
  max-width: 100%; 
  max-height: 350px; 
  border-radius: var(--radius-md); 
  box-shadow: var(--shadow-sm); 
}
.btn-remove { 
  --size: 32px; 
  position: absolute; 
  top: var(--space-sm); 
  right: var(--space-sm); 
  width: var(--size); 
  height: var(--size); 
  display: flex; 
  align-items: center; 
  justify-content: center; 
  border-radius: 50%; 
  background-color: var(--color-error); 
  color: var(--color-surface); 
  font-size: 1.2rem; 
  border: 2px solid var(--color-surface); 
  transition: transform var(--transition-base); 
}
.btn-remove:hover { transform: scale(1.1); }
.youtube-preview-container { 
  display: none; 
  margin-top: var(--space-md); 
}
.youtube-preview-container.active { display: block; }
.youtube-player-wrapper { 
  position: relative; 
  height: 0; 
  padding-bottom: 56.25%; 
  border-radius: var(--radius-md); 
  overflow: hidden; 
}
.youtube-player-wrapper iframe { 
  position: absolute; 
  top: 0; 
  left: 0; 
  width: 100%; 
  height: 100%; 
  border: 0; 
}

/* --- Formul√°rios de Login e Registro --- */
.auth-form { 
  background-color: var(--color-surface); 
  border-radius: var(--radius-lg); 
  padding: clamp(var(--space-md), 5vw, var(--space-xl)); 
  box-shadow: var(--shadow-md); 
  max-width: 500px; 
  margin-inline: auto; 
}
.auth-form h2 { 
  text-align: center; 
  margin-bottom: var(--space-lg); 
}
.auth-form .form-group { 
  margin-bottom: var(--space-md); 
}
.auth-form .btn { 
  width: 100%; 
  margin-top: var(--space-md); 
}

/* ============================================
   üì¢ FEEDBACK E NOTIFICA√á√ïES (Geral)
   ============================================ */
#appNotificationArea { 
  position: fixed; 
  top: 20px; 
  right: 20px; 
  width: 320px; 
  z-index: 2000; 
  display: flex; 
  flex-direction: column; 
  gap: 10px; 
}
.notification { 
  position: relative; 
  padding: 15px 40px 15px 20px; 
  border-radius: var(--radius-md); 
  color: var(--color-surface); 
  font-size: 0.95em; 
  box-shadow: var(--shadow-lg); 
  opacity: 0.98; 
  animation: slideInNotification 0.4s cubic-bezier(0.25, 0.8, 0.25, 1); 
}
.notification.notification--removing { 
  animation: slideOutNotification 0.4s ease forwards; 
}
.notification--success { background-color: var(--color-success); }
.notification--error { background-color: var(--color-error); }
.notification--info { background-color: var(--color-secondary); }
.notification--warning { background-color: var(--color-warning); } /* Novo para rate limiting */
.notification__close { 
  position: absolute; 
  top: 50%; 
  right: 10px; 
  transform: translateY(-50%); 
  background: none; 
  color: inherit; 
  font-size: 24px; 
  opacity: 0.7; 
  transition: opacity 150ms ease; 
}
.notification__close:hover { opacity: 1; }
@keyframes slideInNotification { 
  from { transform: translateX(100%); opacity: 0; } 
  to { transform: translateX(0); opacity: 0.98; } 
}
@keyframes slideOutNotification { 
  to { transform: translateX(100%); opacity: 0; } 
}
.modal-overlay { 
  position: fixed; 
  top: 0; 
  left: 0; 
  width: 100%; 
  height: 100%; 
  background-color: rgba(0, 0, 0, 0.6); 
  display: flex; 
  justify-content: center; 
  align-items: center; 
  z-index: 1000; 
  opacity: 0; 
  visibility: hidden; 
  transition: opacity 0.3s ease, visibility 0.3s ease; 
}
.modal-overlay.active { opacity: 1; visibility: visible; }
.modal-content { 
  background: var(--color-surface); 
  padding: var(--space-xl); 
  border-radius: var(--radius-lg); 
  box-shadow: var(--shadow-lg); 
  text-align: center; 
  width: 90%; 
  max-width: 500px; 
  position: relative; 
  transform: translateY(-50px); 
  transition: transform 0.3s ease; 
}
.modal-overlay.active .modal-content { transform: translateY(0); }
.modal-content h2 { margin-top: 0; color: var(--color-primary); }
.modal-close-btn { 
  position: absolute; 
  top: 10px; 
  right: 15px; 
  background: none; 
  font-size: 1.8rem; 
  cursor: pointer; 
  color: var(--color-muted); 
}
.link-container { 
  display: flex; 
  gap: var(--space-sm); 
  margin: var(--space-lg) 0; 
}
.link-container input { 
  width: 100%; 
  border-radius: var(--radius-md); 
  padding: var(--space-sm); 
  font-size: 1rem; 
  background-color: var(--color-light); 
  border: 1px solid var(--color-border); 
}
.modal-actions { 
  display: flex; 
  justify-content: center; 
  gap: var(--space-md); 
  flex-wrap: wrap; 
}

/* ============================================
   üñºÔ∏è P√ÅGINA DE VISUALIZA√á√ÉO DO CART√ÉO (card.html)
   ============================================ */
.unveiling-container { 
  position: fixed; 
  top: 0; 
  left: 0; 
  width: 100%; 
  height: 100%; 
  display: flex; 
  justify-content: center; 
  align-items: center; 
  text-align: center; 
  background-color: var(--color-bg); 
  z-index: 2000; 
  padding: var(--space-lg); 
  opacity: 0; 
  visibility: hidden; 
  transition: opacity 0.5s ease-out, visibility 0.5s ease-out; 
}
.unveiling-container.visible { opacity: 1; visibility: visible; }
.unveiling-content { 
  animation: fadeIn 1s 0.5s ease-in-out forwards; 
  opacity: 0; 
}
.unveiling-prompt { 
  font-size: 1.2rem; 
  color: var(--color-muted); 
}
.unveiling-name { 
  font-family: var(--font-heading); 
  font-size: clamp(2.5rem, 8vw, 4.5rem); 
  color: var(--color-primary); 
  margin-block: var(--space-xs) var(--space-lg); 
}
.btn--reveal { 
  transform: scale(1.1); 
  box-shadow: 0 0 25px hsla(330, 70%, 60%, 0.5); 
}
.btn--reveal:hover { transform: translateY(-3px) scale(1.1); }

/* --- Layout da P√°gina do Cart√£o Aberto --- */
#card-view-page .main-content { 
  display: flex; 
  align-items: center; 
  justify-content: center; 
}
.card-page-header, .card-page-footer { 
  text-align: center; 
  padding: var(--space-md) 0; 
  flex-shrink: 0; 
  transition: opacity 0.5s ease; 
}
body.card-is-open .card-page-header, 
body.card-is-open .card-page-footer { 
  color: hsla(0, 0%, 100%, 0.7); 
}
body.card-is-open .card-page-header a, 
body.card-is-open .card-page-footer a { 
  color: var(--color-surface); 
  border-color: hsla(0, 0%, 100%, 0.5); 
}
body.card-is-open .card-page-footer a:hover { 
  background-color: var(--color-surface); 
  color: var(--color-bg-dark); 
}
.card-page-header a { 
  font-weight: bold; 
  color: var(--color-primary); 
  font-size: 1.2rem; 
  text-decoration: none; 
}

/* --- Estados de Carregamento e Erro --- */
.loader-wrapper { 
  position: fixed; 
  top: 0; 
  left: 0; 
  width: 100%; 
  height: 100%; 
  display: flex; 
  flex-direction: column; 
  justify-content: center; 
  align-items: center; 
  z-index: 3000; 
  background-color: var(--color-bg); 
  color: var(--color-muted); 
}
.loader { 
  width: 50px; 
  height: 50px; 
  border: 5px solid hsla(330, 70%, 60%, 0.2); 
  border-top-color: var(--color-primary); 
  border-radius: 50%; 
  animation: spin 1s linear infinite; 
  margin-bottom: var(--space-md); 
}
#error-state { text-align: center; }

/* --- Card e Anima√ß√µes em Cascata --- */
.card-preview { 
  background-color: var(--color-surface); 
  border-radius: var(--radius-lg); 
  padding: clamp(var(--space-md), 5vw, var(--space-xl)); 
  box-shadow: var(--shadow-lg); 
  max-width: 650px; 
  width: 100%; 
  text-align: center; 
}
#card-view > * { 
  opacity: 0; 
  animation: fadeInUp 0.8s ease-out forwards; 
}
#card-view .card-preview-header { animation-delay: 0.5s; }
#card-view .card-body { animation-delay: 1.0s; }
#card-view .preview-image-container { animation-delay: 1.8s; }
#card-view .video-frame { animation-delay: 2.1s; }

/* --- Conte√∫do do Cart√£o --- */
.recipient-name { 
  font-family: var(--font-heading); 
  font-size: clamp(2rem, 5vw, 3.5rem); 
  color: var(--color-primary-dark); 
  margin-bottom: var(--space-xs); 
}
.special-date { 
  color: var(--color-muted); 
  font-style: italic; 
  margin-bottom: var(--space-md); 
}
#card-mensagem { 
  font-family: var(--font-handwriting); 
  font-size: clamp(1.8rem, 4vw, 2.6rem); 
  line-height: 1.5; 
  margin-block: var(--space-lg); 
  white-space: pre-wrap; 
}
.card-sender { 
  margin-top: var(--space-lg); 
  font-size: 1.2rem; 
}
.card-sender strong { 
  font-family: var(--font-handwriting); 
  font-weight: 700; 
  font-size: 1.7rem; 
}
.card-image { 
  max-height: 400px; 
  width: auto; 
  margin-inline: auto; 
  border-radius: var(--radius-md); 
  box-shadow: var(--shadow-md); 
}
.video-frame { 
  position: relative; 
  margin-block: var(--space-lg); 
  border-radius: var(--radius-md); 
  overflow: hidden; 
  box-shadow: var(--shadow-md); 
}
.video-player-wrapper { 
  position: relative; 
  height: 0; 
  padding-bottom: 56.25%; 
  background-color: #000; 
}
.video-player-wrapper iframe { 
  position: absolute; 
  top: 0; 
  left: 0; 
  width: 100%; 
  height: 100%; 
  border: 0; 
}
.unmute-button { 
  position: absolute; 
  bottom: 20px; 
  right: 20px; 
  z-index: 10; 
  background-color: hsla(0, 0%, 0%, 0.7); 
  color: var(--color-surface); 
  border-radius: var(--radius-pill); 
  padding: 10px 20px; 
  font-weight: 500; 
  opacity: 0; 
  transform: translateY(10px); 
  transition: all 0.3s ease; 
  display: flex; 
  align-items: center; 
  gap: 8px; 
  animation: pulse 2.5s infinite ease-in-out 3s; 
}
.unmute-button.visible { opacity: 1; transform: translateY(0); }
.unmute-button:hover { background-color: var(--color-primary); animation-play-state: paused; }
.unmute-button.fading-out { opacity: 0 !important; transform: scale(0.8); }
.unmute-button svg { width: 20px; height: 20px; fill: none; stroke: currentColor; }

/* ============================================
   ‚öôÔ∏è ANIMA√á√ïES E UTILIT√ÅRIOS
   ============================================ */
.hidden { display: none !important; }
.sr-only { 
  position: absolute; 
  width: 1px; 
  height: 1px; 
  padding: 0; 
  margin: -1px; 
  overflow: hidden; 
  clip: rect(0, 0, 0, 0); 
  white-space: nowrap; 
  border-width: 0; 
}
.btn .btn-spinner { 
  width: 1.2em; 
  height: 1.2em; 
  border: 2px solid currentColor; 
  border-top-color: transparent; 
  border-radius: 50%; 
  animation: spin 0.8s linear infinite; 
}
@keyframes spin { to { transform: rotate(360deg); } }
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
@keyframes fadeInUp { 
  from { opacity: 0; transform: translateY(30px); } 
  to { opacity: 1; transform: translateY(0); } 
}
@keyframes pulse { 
  0% { transform: scale(1); box-shadow: 0 0 0 0 hsla(330, 70%, 60%, 0.4); } 
  70% { transform: scale(1); box-shadow: 0 0 0 15px hsla(330, 70%, 60%, 0); } 
  100% { transform: scale(1); box-shadow: 0 0 0 0 hsla(330, 70%, 60%, 0); } 
}

/* ============================================
   üì± RESPONSIVIDADE
   ============================================ */
@media (max-width: 768px) {
  .container { padding-inline: var(--space-sm); }
  .main-header { padding: var(--space-md) var(--space-sm); }
  h1 { font-size: clamp(2rem, 5vw, 2.5rem); }
  h2 { font-size: clamp(1.6rem, 4vw, 2rem); }
  .card-form, .auth-form { padding: var(--space-md); }
  .form-group { margin-bottom: var(--space-sm); }
  .input-group-action { flex-direction: column; }
  .youtube-input-group { grid-template-columns: 1fr; }
  .youtube-time-group { flex-direction: column; }
  #appNotificationArea { width: 90%; right: 5%; top: 10px; }
  .modal-content { width: 95%; padding: var(--space-md); }
  .recipient-name { font-size: clamp(1.8rem, 4vw, 2.8rem); }
  #card-mensagem { font-size: clamp(1.6rem, 3.5vw, 2.2rem); }
}

@media (max-width: 480px) {
  .btn { padding: 0.6em 1.2em; font-size: 0.9rem; }
  .modal-actions { flex-direction: column; }
  .link-container { flex-direction: column; }
  .unveiling-name { font-size: clamp(2rem, 6vw, 3.5rem); }
}