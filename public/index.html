<!DOCTYPE html>
<html lang="pt-BR" dir="ltr" class="no-js">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description"
        content="Crie cartões especiais com mensagens personalizadas, fotos e vídeos do YouTube para presentear quem você ama." />
    <meta name="theme-color" content="#e91e63" />
    <title>Messagelove - Crie Cartões Especiais Personalizados</title>

    <link rel="preconnect" href="https://messagelove-backend.onrender.com" />
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

    <link rel="icon" href="/coracao.png" type="image/png" />
    <link rel="manifest" href="manifest.webmanifest" />

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="style.css" />

    <meta property="og:title" content="Messagelove - Crie Cartões Especiais" />
    <meta property="og:description"
        content="Crie cartões especiais com mensagens personalizadas, fotos e vídeos do YouTube para presentear quem você ama." />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://messagelove-frontend.vercel.app" />
    <meta property="og:image" content="/assets/og-image.jpg" />
    <meta property="og:locale" content="pt_BR" />

    <style>
        /* Estilos básicos para os novos campos de tempo. Você pode mover para seu style.css */
        .form-group-time-container {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            margin-top: 0.75rem;
        }

        .time-inputs {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .form-input-time {
            width: 70px; /* Largura fixa para os campos de tempo */
        }
    </style>
</head>

<body>
    <script>
        (function() {
            var html = document.documentElement;
            if (html.classList.contains('no-js')) {
                html.classList.remove('no-js');
                html.classList.add('js');
            }
        })();
    </script>

    <div class="no-js-alert" role="alert">
        <p>Este site requer JavaScript para funcionar corretamente. Por favor, ative-o em suas configurações do
            navegador.</p>
    </div>

    <header class="main-header" role="banner">
        <div class="container">
            <h1>Crie um Cartão Especial</h1>
            <p class="subtitle">Compartilhe seu amor com mensagens personalizadas, fotos e vídeos do YouTube</p>
        </div>
    </header>

    <main class="main-content" role="main">
        <div class="container">
            <form id="cardForm" class="card-form" novalidate data-js="card-form">
                <fieldset class="form-section">
                    <legend class="section-title">
                        <h2>Informações do Cartão</h2>
                    </legend>

                    <div class="form-group">
                        <label for="nome" class="required-field">Nome do Destinatário<span
                                class="sr-only">(obrigatório)</span></label>
                        <input type="text" id="nome" name="nome" class="form-input" required placeholder="Para quem é este cartão?"
                            aria-required="true" data-js="nome-input" />
                        <small class="field-hint">Obrigatório</small>
                    </div>

                    <div class="form-group">
                        <label for="data">Data Especial</label>
                        <input type="date" id="data" name="data" class="form-input" aria-describedby="dataHelp" data-js="data-input" />
                        <small id="dataHelp" class="field-hint">Ex: Aniversário, Dia dos Namorados</small>
                    </div>

                    <div class="form-group">
                        <label for="mensagem" class="required-field">Sua Mensagem<span
                                class="sr-only">(obrigatório)</span></label>
                        <textarea id="mensagem" name="mensagem" class="form-input" required placeholder="Escreva sua mensagem especial..."
                            aria-required="true" data-js="mensagem-input"></textarea>
                        <small class="field-hint">Obrigatório</small>
                    </div>

                    <div class="form-group file-upload" data-js="file-upload">
                        <label for="fotoUpload">Adicionar Foto (Opcional)</label>
                        <input type="file" id="fotoUpload" name="foto" accept="image/jpeg,image/png,image/gif"
                            aria-describedby="fotoHelp" data-js="foto-input" />
                        <small id="fotoHelp" class="field-hint">Formatos: JPG, PNG, GIF (máx. 5MB)</small>
                        <div class="preview-container" hidden data-js="preview-container">
                            <img id="fotoPreview" class="preview" alt="Pré-visualização da foto selecionada"
                                data-js="foto-preview" />
                            <button type="button" class="btn btn-remove" id="removeFoto"
                                aria-label="Remover foto selecionada" data-js="remove-foto">×</button>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="youtubeUrlInput">Link do YouTube (Opcional)</label>
                        <div class="input-container" style="display: flex; gap: 10px;">
                            <input type="url" id="youtubeUrlInput" name="youtubeUrl" class="form-input"
                                placeholder="Cole o link do vídeo do YouTube aqui" aria-describedby="youtubeUrlHelp"
                                aria-required="false" />
                            <button type="button" id="addYoutubeUrlBtn" class="btn btn--secondary"
                                style="white-space: nowrap;">Adicionar</button>
                        </div>
                        <small id="youtubeUrlHelp" class="field-hint">Se desejar, adicione um vídeo do YouTube ao seu
                            cartão.</small>
                        <div id="youtubeError" class="youtube-error"></div>
                        
                        <div class="form-group-time-container">
                             <label for="youtubeStartTimeMin">Tempo de Início do Vídeo (Opcional)</label>
                             <div class="time-inputs">
                                 <input type="number" id="youtubeStartTimeMin" class="form-input form-input-time" placeholder="Min" min="0">
                                 <span>:</span>
                                 <input type="number" id="youtubeStartTimeSec" class="form-input form-input-time" placeholder="Seg" min="0" max="59">
                             </div>
                        </div>
                        </div>

                    <div id="youtubePreviewContainer" class="youtube-preview-container">
                        <div class="youtube-player-wrapper">
                            <iframe id="youtubePlayer" allowfullscreen></iframe>
                        </div>
                        <input type="hidden" id="youtubeVideoId" name="youtubeVideoId" />
                    </div>

                    <div class="form-group form-actions">
                        <button type="submit" class="btn btn-submit btn--primary" id="submitBtn" data-js="submit-btn">
                            <span class="btn-text">Criar Cartão</span>
                            <span class="btn-loading" aria-hidden="true" hidden>
                                <span class="btn-spinner" aria-hidden="true"></span> Processando...
                            </span>
                        </button>
                        <small class="form-note">Seu cartão será gerado e você receberá um link único para
                            compartilhar.</small>
                    </div>
                </fieldset>
            </form>
        </div>
    </main>

    <footer class="main-footer" role="contentinfo">
        <div class="container">
            <p>
                <span>Messagelove © <span id="currentYear" data-js="current-year">2025</span></span>
                <span>Feito com <span aria-label="coração">❤️</span> por <a
                        href="https://pedrolucas167.github.io/portfolio/" target="_blank"
                        rel="noopener noreferrer">Pedro Marques</a></span>
            </p>
        </div>
    </footer>

    <div id="appNotificationArea"></div>

    <script async src="https://www.youtube.com/iframe_api"></script>
    <script src="script.js" defer></script> 
    <canvas id="particle-canvas"></canvas>
</body>
</html>