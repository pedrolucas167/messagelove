<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ğŸ’– Seu CartÃ£o Especial</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="container">
    <h1>ğŸ’Œ Seu CartÃ£o</h1>
    <div id="cartao" class="cartao">
      <h3 id="nome"></h3>
      <p id="data"></p>
      <p id="mensagem"></p>
      <img id="foto" style="display: none;" />
      <iframe id="spotify" width="300" height="80" frameborder="0" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" style="display: none;"></iframe>
      <audio id="mp3" controls style="display: none;">
        <source src="" type="audio/mpeg" />
        Seu navegador nÃ£o suporta Ã¡udio.
      </audio>
    </div>
  </div>
  <script>
    // Carrega o cartÃ£o com base no ID da URL
    const urlParams = new URLSearchParams(window.location.search);
    const id = urlParams.get('id');
    if (id) {
      fetch(`http://localhost:3000/api/cards/${id}`)
        .then(response => response.json())
        .then(data => {
          document.getElementById('nome').innerText = data.nome;
          document.getElementById('data').innerText = `Juntos desde: ${data.data}`;
          document.getElementById('mensagem').innerText = data.mensagem;
          if (data.fotoUrl) {
            document.getElementById('foto').src = data.fotoUrl;
            document.getElementById('foto').style.display = 'block';
          }
          if (data.spotify) {
            document.getElementById('spotify').src = `https://open.spotify.com/embed/track/${data.spotify}`;
            document.getElementById('spotify').style.display = 'block';
          }
          if (data.mp3Url) {
            document.getElementById('mp3').querySelector('source').src = data.mp3Url;
            document.getElementById('mp3').style.display = 'block';
            document.getElementById('mp3').load();
          }
        })
        .catch(error => {
          console.error('Erro ao carregar cartÃ£o:', error);
          document.getElementById('cartao').innerHTML = '<p>CartÃ£o nÃ£o encontrado!</p>';
        });
    }
  </script>
</body>
</html>