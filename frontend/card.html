<!DOCTYPE html>
<html lang="pt-BR" dir="ltr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Um cart√£o especial criado com Messagelove apenas para voc√™!">
  <title>Seu Cart√£o Especial | Messagelove</title>
  
  {/* Links para CSS e Favicon/Manifest - Ajuste os caminhos se 'assets' n√£o estiver na raiz */}
  <link rel="stylesheet" href="/frontend/style.css" />
  <link rel="icon" href="/assets/coracao.png" type="image/png" /> 
  <link rel="apple-touch-icon" href="/assets/coracao.png" /> 
  <link rel="manifest" href="/manifest.webmanifest" /> 

  {/* Adicionado para clareza, embora n√£o usado diretamente aqui se Web Playback SDK for para SPA principal */}
  <script src="https://developer.spotify.com/documentation/web-api/tutorials/code-flow"></script> 
  <style>
    /* Estilo b√°sico para feedback de carregamento e erro, pode ser movido para style.css */
    .loading-state, .error-state {
      text-align: center;
      padding: 2rem;
      font-size: 1.2em;
      color: #555;
    }
    .card-media { min-height: 80px; /* Para evitar colapso se nada for carregado */ }
    .hidden { display: none !important; }
  </style>
</head>

<body>
  <header class="card-header">
    <div class="container">
      <h1>Seu Cart√£o Especial</h1>
      <p class="subtitle">Criado com ‚ù§Ô∏è usando <strong>Messagelove</strong></p>
    </div>
  </header>

  <main class="card-main">
    <div class="container">
      <article id="cartao" class="cartao">
        <div class="card-content">
          {/* Conte√∫do ser√° preenchido por card.js */}
          <div id="card-data-container">
            <div id="card-loading" class="loading-state">Carregando seu cart√£o... üíå</div>
            <div id="card-error" class="error-state hidden"></div>
            
            <div id="card-details" class="hidden"> {/* Escondido at√© os dados carregarem */}
              <h2 id="nome" class="card-title"></h2>
              <div class="card-meta">
                <p id="data" class="card-date"></p>
              </div>
              <section class="card-message">
                <p id="mensagem" class="message-text"></p>
              </section>
              <section class="card-media">
                <img 
                  id="foto" 
                  class="card-image hidden" {/* Escondido at√© ter src */}
                  src="" {/* Ser√° preenchido por JS, ou pode manter o placeholder */}
                  alt="Imagem especial do cart√£o" 
                  title="Imagem do cart√£o"
                />

                {/* O card.js decidir√° qual player mostrar/preencher */}
                <div id="spotify-container" class="music-player hidden">
                  {/* O src do iframe ser√° definido por card.js se houver um spotifyTrackId */}
                  {/* URL de embed: https://developer.spotify.com/documentation/web-api/reference/player/3{ID_DA_FAIXA} */}
                  <iframe 
                    id="spotify"
                    style="border-radius:12px" /* Sugest√£o de estilo do Spotify */
                    src="" /* Ser√° preenchido por JS */
                    width="100%" 
                    height="152" /* Altura sugerida pelo Spotify para o embed compacto */
                    frameBorder="0" 
                    allowfullscreen="" /* Atributo booleano */
                    allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" 
                    loading="lazy"
                    title="Player Incorporado do Spotify">
                  </iframe>
                </div>

                <div id="audio-container" class="music-player hidden">
                  {/* O src da source ser√° definido por card.js se houver uma previewUrl (MP3) */}
                  <audio id="mp3" controls style="width: 100%;">
                    <source src="" type="audio/mpeg" />
                    Seu navegador n√£o suporta o elemento de √°udio.
                  </audio>
                </div>
              </section>
            </div>
          </div>
        </div>
      </article>
    </div>
  </main>

  <footer class="card-footer">
    <div class="container">
      <p>Messagelove &copy; <span id="currentYear"></span></p>
      <p class="share-text">üíå Gostou? Crie o seu tamb√©m e compartilhe amor!</p>
      {/* Opcional: Link para criar um novo cart√£o */}
      {/* <p><a href="https://messagelove-frontend.vercel.app/">Crie seu pr√≥prio cart√£o!</a></p> */}
    </div>
  </footer>

  <script>
    document.getElementById('currentYear').textContent = new Date().getFullYear();
  </script>
  {/* card.js ser√° respons√°vel por buscar os dados do cart√£o e preencher o HTML */}
  <script src="/frontend/card.js"></script> 
</body>
</html>